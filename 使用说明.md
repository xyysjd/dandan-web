# 弹弹Play Web 使用说明

## 🚀 快速启动

### 在服务器上运行

1. **上传项目到服务器**
```bash
# 使用git克隆
git clone <your-repository-url>
cd dandan-web

# 或使用scp上传
scp -r dandan-web/ user@server:/path/to/
```

2. **一键启动**
```bash
chmod +x start.sh
./start.sh
```

3. **访问应用**
- 前端：`http://服务器IP:3000`
- 后端API：`http://服务器IP:8000`
- API文档：`http://服务器IP:8000/docs`

## 📱 功能使用

### 1. 上传视频
- 点击首页的上传区域
- 选择视频文件（支持常见格式）
- 系统会自动计算MD5值

### 2. 弹幕匹配
- **自动匹配**：上传后自动根据文件名和MD5匹配弹幕
- **手动匹配**：在播放页面点击"手动匹配"，输入关键词搜索
- **导入XML**：支持导入B站等网站的XML弹幕文件

### 3. 播放器选择
- **基础播放器**：HTML5原生播放器，兼容性最好
- **NPlayer**：现代播放器（需要额外依赖）
- **ArtPlayer**：简洁播放器（需要额外依赖）

### 4. 设置调整
- **主题色**：可自定义界面主题色
- **暗色模式**：支持明暗主题切换
- **弹幕设置**：调整弹幕样式和显示

## 🔧 常用命令

### 查看服务状态
```bash
docker-compose ps
```

### 查看日志
```bash
# 查看所有服务日志
docker-compose logs -f

# 查看特定服务日志
docker-compose logs -f backend
docker-compose logs -f frontend
```

### 重启服务
```bash
docker-compose restart
```

### 停止服务
```bash
docker-compose down
```

### 更新代码后重新部署
```bash
git pull
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

## 🛠️ 故障排除

### 端口被占用
```bash
# 查看端口占用
sudo netstat -tlnp | grep :3000
sudo netstat -tlnp | grep :8000

# 修改docker-compose.yml中的端口映射
```

### 服务启动失败
```bash
# 查看详细错误日志
docker-compose logs backend
docker-compose logs frontend

# 重新构建镜像
docker-compose build --no-cache
```

### 依赖问题
```bash
# 运行修复脚本
chmod +x fix-dependencies.sh
./fix-dependencies.sh
```

### 权限问题
```bash
# 修改文件权限
sudo chown -R $USER:$USER dandan-web/
chmod -R 755 dandan-web/
```

## 📋 系统要求

### 最低配置
- **CPU**: 1核心
- **内存**: 2GB RAM
- **存储**: 10GB可用空间
- **系统**: Linux (Ubuntu/Debian/CentOS)

### 推荐配置
- **CPU**: 2核心以上
- **内存**: 4GB RAM以上
- **存储**: 50GB可用空间
- **带宽**: 10Mbps以上

## 🔒 安全建议

1. **防火墙配置**
```bash
# Ubuntu/Debian
sudo ufw allow 3000
sudo ufw allow 8000

# CentOS/RHEL
sudo firewall-cmd --permanent --add-port=3000/tcp
sudo firewall-cmd --permanent --add-port=8000/tcp
sudo firewall-cmd --reload
```

2. **定期更新**
```bash
# 更新系统
sudo apt update && sudo apt upgrade -y

# 更新Docker镜像
docker-compose pull
docker-compose up -d
```

3. **备份数据**
```bash
# 备份上传的文件
tar -czf uploads-backup-$(date +%Y%m%d).tar.gz backend/uploads/
```

## 📞 技术支持

如果遇到问题，请：
1. 查看日志文件
2. 检查系统资源使用情况
3. 确认网络连接正常
4. 参考故障排除部分

## 🎬 开始使用

现在您可以开始使用弹弹Play Web了！
- 上传您的视频文件
- 享受自动弹幕匹配
- 体验流畅的播放体验
